*** Settings ***
Documentation     NOTE:
...               add note here
Suite Setup       Suite Setup
Force Tags        DROP_TABLESPACE    win11    unix11    unix10
Default Tags      ALL
Test Template     Drop Tablespace Template
Resource          ../../resources/keywords.txt

*** Test Cases ***    NAME    FAIL IF NOT EXISTS    DROP CONTENTS    DROP DATAFILES    CASCADE    DATAFILE PATH                 RETURN CODE    RETURN STATUS
Drop Tablespace Normal Drop Data Files
                      tbs2    NO                    YES              YES               NO         ${DATAFILE_PATH1} size 10m    0              ${ENDED_OK}

Drop Tablespace Normal Drop Contents
                      tbs2    NO                    YES              YES               YES        ${DATAFILE_PATH2} size 10m    0              ${ENDED_OK}

Drop Tablespace Normal Cascade
                      tbs2    NO                    YES              NO                YES        ${DATAFILE_PATH3} size 10m    0              ${ENDED_OK}

Drop Tablespace Normal Not Drop Contents
                      tbs2    NO                    NO               NO                NO         ${DATAFILE_PATH4} size 10m    0              ${ENDED_OK}

*** Keywords ***
Drop Tablespace Template
    [Arguments]    ${name}    ${fail_if_not_exists}    ${drop_contents}    ${drop_datafiles}    ${cascade_cnstr}    ${datafile_spec}
    ...    ${returnCode}    ${returnStatus}
    Init Action    ${ACTION_CREATE_TABLESPACE}
    Oracle Common Setting
    Action Set    ${PRT_CREATE_TABLESPACE_DB_TABLESPACE_NAME}    ${name}
    Action Set    ${PRT_CREATE_TABLESPACE_DB_FAIL_IF_TS_EXISTS}    NO
    Action Set    ${PRT_CREATE_TABLESPACE_DB_TABLESPACE_TYPE}    Permanent
    Action Set    ${PRT_CREATE_TABLESPACE_DB_SMALLFILE}    DEFAULT
    Action Set    ${PRT_CREATE_TABLESPACE_DB_LOGGING}    DEFAULT
    Action Set    ${PRT_CREATE_TABLESPACE_DB_FORCE_LOGGING}    DEFAULT
    Action Set    ${PRT_CREATE_TABLESPACE_DB_ONLINE}    YES
    Action Set    ${PRT_CREATE_TABLESPACE_DB_EXT_MGMT_CLAUSE}    Omit
    Action Set    ${PRT_CREATE_TABLESPACE_DB_EXT_MGMT_TYPE}    Local
    Action Set    ${PRT_CREATE_TABLESPACE_DB_EXT_MGMT_AUTOALLOC}    YES
    Action Set    ${PRT_CREATE_TABLESPACE_DB_EXT_MGMT_UNIFORM}    NO
    Action Set    ${PRT_CREATE_TABLESPACE_DB_SEGM_SPC_AUTO}    YES
    Action Set    ${PRT_CREATE_TABLESPACE_DB_RETENTION}    NO
    Action Set    ${PRT_CREATE_TABLESPACE_DB_PERM_DATAFILE_SPEC}    ${datafile_spec}
    Action Execute
    Init Action    ${ACTION_DROP_TABLESPACE}
    Oracle Common Setting
    Action Set    ${PRT_DROP_TABLESPACE_DB_DROP_TABLESPACE}    ${name}
    Action Set    ${PRT_DROP_TABLESPACE_DB_FAIL_TS_NOT_EXISTS}    ${fail_if_not_exists}
    Action Set    ${PRT_DROP_TABLESPACE_DB_DROP_CONTENTS}    ${drop_contents}
    Action Set    ${PRT_DROP_TABLESPACE_DB_DROP_DATAFILES}    ${drop_datafiles}
    Action Set    ${PRT_DROP_TABLESPACE_DB_CASCADE_CNSTR}    ${cascade_cnstr}
    Action Execute
    Action Report Should Be Found
    Action Return Code Should Be    ${returnCode}
    Action Return Status Should Be    ${returnStatus}
